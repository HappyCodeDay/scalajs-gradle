language: scala
language: groovy
jdk:
    - oraclejdk8
scala:
    - 2.11.7
before_install:
    - sudo apt-get -qq update
    - cd ./scalajs-plugin/
    - chmod +x ./gradlew
    - ./gradlew assemble
    - cd ../scalajs-plugin-test/
    - chmod +x ./gradlew
    - ./gradlew assemble
    - cd ..

script: 
    - cd ./scalajs-plugin/
    - ./gradlew install
    - cd ../scalajs-plugin-test/
    - ./gradlew FullOptJS
    - ./gradlew FastOptJS
    - ./gradlew RunJS -Pclassname=main.scala.ScalaTagTest
    - ./gradlew CleanAll

before_cache:
    - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/